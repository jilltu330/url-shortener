<div class="row d-flex justify-content-center">
  <div class="col-8">
    <div class="card text-center">
      <div class="card-top my-5">
        <h2 class="my-4">URL Shortener</h2>
        <i class="fas fa-link fa-7x my-4"></i>
      </div>
      <div class="card-body">
        <h4>Success! Please use this link:</h4>
        <a href="{{ result }}" id="result" value="{{ result }}" style="display: block; font-size: 1.5em;" >{{ result }}</a>
        <button class="btn btn-outline-primary mt-3" name="copy-btn" onclick="copyFunc()">Copy</button>
      </div>
    </div>
  </div>
</div>

<script>
  function copyFunc () {
    const url = document.querySelector('#result').innerText
    navigator.permissions.query({ name: "clipboard-write" }).then(result => {
      if (result.state == "granted" || result.state == "prompt") {
        navigator.clipboard.writeText(url).then(function () {
          alert('copied')
        }, function () {
          alert('error')
        });
      }
    });
  }
</script>